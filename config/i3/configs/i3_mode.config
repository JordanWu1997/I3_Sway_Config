# vim: syntax=i3
# ======================================================================================
# All About Modes
# ======================================================================================
# This is to save all bindkeys of modes

# Layout mode
# Autotiling [https://github.com/nwg-piotr/autotiling]
# -- Installation: pip install autotiling
set $mode_layout Layout: [h]split [v]split [t]abbed [s]tacking [f]ullcreen [F]ullscreen_global [e]nable_autotiling [d]isable_autotiling
bindsym Mod4+Shift+w mode "$mode_layout"
mode "$mode_layout" {
    bindsym h       layout splith
    bindsym v       layout splitv
    bindsym t       layout tabbed
    bindsym s       layout stacking
    bindsym f       fullscreen toggle
    bindsym Shift+f fullscreen toggle global
    bindsym e       exec $I3_SCRIPT/i3_autotiling_operator.sh enable; mode "default"
    bindsym d       exec $I3_SCRIPT/i3_autotiling_operator.sh disable; mode "default"
    # exit mode: "Enter" or "Escape"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Titlebar mode
# Gtk-tree-watch [https://github.com/sciurus/i3tree]
set $mode_titlebar Titlebar: [n]ew_name [d]efault_name [s]how_title [h]ide_title [f]ontsize [b]order [t]ree
bindsym Mod4+Shift+t mode "$mode_titlebar"
mode "$mode_titlebar" {
    bindsym n exec i3-msg title_format $(rofi -dmenu -lines 0 -p "New title name")
    bindsym d title_format "%title"; exec notify-send -u low "i3 titlebar" "Restore Default Title Name"
    bindsym s [all] border normal; exec notify-send -u low "i3 titlebar" "Show All Titlebars"
    bindsym h [all] border $default_border_width; exec notify-send -u low "i3 titlebar" "Hide All Titlebars"
    bindsym f mode "$mode_titlebar_font"
    bindsym b mode "$mode_border"
    bindsym t exec gtk-tree-watch.pl; mode "default"
    # exit mode: "Enter" or "Escape"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Titlebar fontsize mode (within titlebar mode)
set $mode_titlebar_font Fontsize: [1] 0 [2] 8 [3] 10 [4] 12 [5] 14 [6] 16 [7] 18 [8] 20
mode "$mode_titlebar_font" {
    bindsym 1 exec $I3_SCRIPT/i3_default_valuechanger.sh titlebar_fontsize 0; mode "default"
    bindsym 2 exec $I3_SCRIPT/i3_default_valuechanger.sh titlebar_fontsize 8; mode "default"
    bindsym 3 exec $I3_SCRIPT/i3_default_valuechanger.sh titlebar_fontsize 10; mode "default"
    bindsym 4 exec $I3_SCRIPT/i3_default_valuechanger.sh titlebar_fontsize 12; mode "default"
    bindsym 5 exec $I3_SCRIPT/i3_default_valuechanger.sh titlebar_fontsize 14; mode "default"
    bindsym 6 exec $I3_SCRIPT/i3_default_valuechanger.sh titlebar_fontsize 16; mode "default"
    bindsym 7 exec $I3_SCRIPT/i3_default_valuechanger.sh titlebar_fontsize 18; mode "default"
    bindsym 8 exec $I3_SCRIPT/i3_default_valuechanger.sh titlebar_fontsize 20; mode "default"
    # exit mode: "Enter" or "Escape"
    bindsym Return mode "$mode_titlebar"
    bindsym Escape mode "default"
}

# Border mode (within titlebar mode)
set $mode_border Border: [n]o_border [1]pix [2]pix [3]pix [4]pix [5]pix 1[0]pix [N]ormal [t]oggle [r]estore_to_default [s]et_new_fault
mode "$mode_border" {
    bindsym n       border none
    bindsym 1       border pixel 1
    bindsym 2       border pixel 2
    bindsym 3       border pixel 3
    bindsym 4       border pixel 4
    bindsym 5       border pixel 5
    bindsym 0       border pixel 10
    bindsym Shift+n border normal
    bindsym t       border toggle
    bindsym r       border $default_border_width
    bindsym s       mode "$mode_set_border"
    # exit mode: "Enter" or "Escape"
    bindsym Return mode "$mode_titlebar"
    bindsym Escape mode "default"
    # motion (change focus)
    bindsym Mod4+h     focus left
    bindsym Mod4+j     focus down
    bindsym Mod4+k     focus up
    bindsym Mod4+l     focus right
    bindsym Mod4+space focus mode_toggle
}

# Set border width mode (within border mode)
set $mode_set_border Width pixel value: [n]o_border [1]pix [2]pix [3]pix [4]pix [5]pix 1[0]pix [N]ormal
mode "$mode_set_border" {
    bindsym n       exec $I3_SCRIPT/i3_default_valuechanger.sh border_width 0; mode "default"
    bindsym 1       exec $I3_SCRIPT/i3_default_valuechanger.sh border_width 1; mode "default"
    bindsym 2       exec $I3_SCRIPT/i3_default_valuechanger.sh border_width 2; mode "default"
    bindsym 3       exec $I3_SCRIPT/i3_default_valuechanger.sh border_width 3; mode "default"
    bindsym 4       exec $I3_SCRIPT/i3_default_valuechanger.sh border_width 4; mode "default"
    bindsym 5       exec $I3_SCRIPT/i3_default_valuechanger.sh border_width 5; mode "default"
    bindsym 0       exec $I3_SCRIPT/i3_default_valuechanger.sh border_width 10; mode "default"
    bindsym Shift+n exec $I3_SCRIPT/i3_default_valuechanger.sh border_width normal; mode "default"
    # exit mode: "Enter" or "Escape"
    bindsym Return mode "$mode_border"
    bindsym Escape mode "default"
}

# Mark mode [use rofi as input]
# Automark windows [https://github.com/lincheney/i3-automark] is required
set $mode_mark Mark: [m]ark [']goto [semi-colon/colon]swap_and_move/stay [/]show [e]nable_automark [d]isable_automark
bindsym Mod4+Shift+m mode "$mode_mark"
mode "$mode_mark" {
    bindsym m               exec $I3_SCRIPT/i3_mark_operator.sh mark rofi none; mode "default"
    bindsym apostrophe      exec $I3_SCRIPT/i3_mark_operator.sh show_then_goto rofi none; mode "default"
    bindsym Shift+semicolon exec $I3_SCRIPT/i3_mark_operator.sh show_then_swap rofi none; mode "default"
    bindsym semicolon       exec $I3_SCRIPT/i3_mark_operator.sh show_then_swap rofi stay; mode "default"
    bindsym slash           exec $I3_SCRIPT/i3_mark_operator.sh show rofi none
    bindsym e               exec $I3_SCRIPT/i3_automark_operator.sh enable; mode "default"
    bindsym d               exec $I3_SCRIPT/i3_automark_operator.sh disable; mode "default"
    # exit mode: "Enter" or "Escape"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}


# Workspace mode
set $mode_workspace Workspace: [r]estore_workspace [s]ave_workspace [S]wap_workspace
bindsym Mod4+Shift+p mode $mode_workspace
mode "$mode_workspace" {
    bindsym r       mode $mode_restore_workspace
    bindsym s       mode $mode_save_workspace
    bindsym Shift+s mode $mode_swap_workspace
    # exit mode: "Enter" or "Escape"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Swap workspace mode (integrated with workspace mode)
set $mode_swap_workspace Swap workspace: [Win+1~10]:A1-A10 [Win+F1~F10]:B1-B10 [Ctrl+F1~F10]:C1-C10 [Alt+F1~F10]:D1-D10
bindsym Mod4+p mode $mode_swap_workspace
mode "$mode_swap_workspace" {
    bindsym Mod4+1   exec $I3_SCRIPT/i3_workspace_operator.sh single A 1; mode "default"
    bindsym Mod4+2   exec $I3_SCRIPT/i3_workspace_operator.sh single A 2; mode "default"
    bindsym Mod4+3   exec $I3_SCRIPT/i3_workspace_operator.sh single A 3; mode "default"
    bindsym Mod4+4   exec $I3_SCRIPT/i3_workspace_operator.sh single A 4; mode "default"
    bindsym Mod4+5   exec $I3_SCRIPT/i3_workspace_operator.sh single A 5; mode "default"
    bindsym Mod4+6   exec $I3_SCRIPT/i3_workspace_operator.sh single A 6; mode "default"
    bindsym Mod4+7   exec $I3_SCRIPT/i3_workspace_operator.sh single A 7; mode "default"
    bindsym Mod4+8   exec $I3_SCRIPT/i3_workspace_operator.sh single A 8; mode "default"
    bindsym Mod4+9   exec $I3_SCRIPT/i3_workspace_operator.sh single A 9; mode "default"
    bindsym Mod4+10  exec $I3_SCRIPT/i3_workspace_operator.sh single A 10; mode "default"
    bindsym Mod4+F1  exec $I3_SCRIPT/i3_workspace_operator.sh single B 1; mode "default"
    bindsym Mod4+F2  exec $I3_SCRIPT/i3_workspace_operator.sh single B 2; mode "default"
    bindsym Mod4+F3  exec $I3_SCRIPT/i3_workspace_operator.sh single B 3; mode "default"
    bindsym Mod4+F4  exec $I3_SCRIPT/i3_workspace_operator.sh single B 4; mode "default"
    bindsym Mod4+F5  exec $I3_SCRIPT/i3_workspace_operator.sh single B 5; mode "default"
    bindsym Mod4+F6  exec $I3_SCRIPT/i3_workspace_operator.sh single B 6; mode "default"
    bindsym Mod4+F7  exec $I3_SCRIPT/i3_workspace_operator.sh single B 7; mode "default"
    bindsym Mod4+F8  exec $I3_SCRIPT/i3_workspace_operator.sh single B 8; mode "default"
    bindsym Mod4+F9  exec $I3_SCRIPT/i3_workspace_operator.sh single B 9; mode "default"
    bindsym Mod4+F10 exec $I3_SCRIPT/i3_workspace_operator.sh single B 10; mode "default"
    bindsym Ctrl+F1  exec $I3_SCRIPT/i3_workspace_operator.sh single C 1; mode "default"
    bindsym Ctrl+F2  exec $I3_SCRIPT/i3_workspace_operator.sh single C 2; mode "default"
    bindsym Ctrl+F3  exec $I3_SCRIPT/i3_workspace_operator.sh single C 3; mode "default"
    bindsym Ctrl+F4  exec $I3_SCRIPT/i3_workspace_operator.sh single C 4; mode "default"
    bindsym Ctrl+F5  exec $I3_SCRIPT/i3_workspace_operator.sh single C 5; mode "default"
    bindsym Ctrl+F6  exec $I3_SCRIPT/i3_workspace_operator.sh single C 6; mode "default"
    bindsym Ctrl+F7  exec $I3_SCRIPT/i3_workspace_operator.sh single C 7; mode "default"
    bindsym Ctrl+F8  exec $I3_SCRIPT/i3_workspace_operator.sh single C 8; mode "default"
    bindsym Ctrl+F9  exec $I3_SCRIPT/i3_workspace_operator.sh single C 9; mode "default"
    bindsym Ctrl+F10 exec $I3_SCRIPT/i3_workspace_operator.sh single C 10; mode "default"
    bindsym Mod1+F1  exec $I3_SCRIPT/i3_workspace_operator.sh single D 1; mode "default"
    bindsym Mod1+F2  exec $I3_SCRIPT/i3_workspace_operator.sh single D 2; mode "default"
    bindsym Mod1+F3  exec $I3_SCRIPT/i3_workspace_operator.sh single D 3; mode "default"
    bindsym Mod1+F4  exec $I3_SCRIPT/i3_workspace_operator.sh single D 4; mode "default"
    bindsym Mod1+F5  exec $I3_SCRIPT/i3_workspace_operator.sh single D 5; mode "default"
    bindsym Mod1+F6  exec $I3_SCRIPT/i3_workspace_operator.sh single D 6; mode "default"
    bindsym Mod1+F7  exec $I3_SCRIPT/i3_workspace_operator.sh single D 7; mode "default"
    bindsym Mod1+F8  exec $I3_SCRIPT/i3_workspace_operator.sh single D 8; mode "default"
    bindsym Mod1+F9  exec $I3_SCRIPT/i3_workspace_operator.sh single D 9; mode "default"
    bindsym Mod1+F10 exec $I3_SCRIPT/i3_workspace_operator.sh single D 10; mode "default"
    # exit mode: "Enter" or "Escape"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Save workspace mode (within workspace mode)
set $mode_save_workspace Save workspace: [Win+1~10]:A1-A10 [Win+F1~F10]:B1-B10 [Ctrl+1~10]:C1-C10 [Alt+F1~F10]:D1-D10 [s]ave_all_workspaces
mode "$mode_save_workspace" {
    bindsym Mod4+1   exec i3-resurrect save -w 1:A1; mode "default"
    bindsym Mod4+2   exec i3-resurrect save -w 2:A2; mode "default"
    bindsym Mod4+3   exec i3-resurrect save -w 3:A3; mode "default"
    bindsym Mod4+4   exec i3-resurrect save -w 4:A4; mode "default"
    bindsym Mod4+5   exec i3-resurrect save -w 5:A5; mode "default"
    bindsym Mod4+6   exec i3-resurrect save -w 6:A6; mode "default"
    bindsym Mod4+7   exec i3-resurrect save -w 7:A7; mode "default"
    bindsym Mod4+8   exec i3-resurrect save -w 8:A8; mode "default"
    bindsym Mod4+9   exec i3-resurrect save -w 9:A9; mode "default"
    bindsym Mod4+10  exec i3-resurrect save -w 10:A10; mode "default"
    bindsym Mod4+F1  exec i3-resurrect save -w 11:B1; mode "default"
    bindsym Mod4+F2  exec i3-resurrect save -w 12:B2; mode "default"
    bindsym Mod4+F3  exec i3-resurrect save -w 13:B3; mode "default"
    bindsym Mod4+F4  exec i3-resurrect save -w 14:B4; mode "default"
    bindsym Mod4+F5  exec i3-resurrect save -w 15:B5; mode "default"
    bindsym Mod4+F6  exec i3-resurrect save -w 16:B6; mode "default"
    bindsym Mod4+F7  exec i3-resurrect save -w 17:B7; mode "default"
    bindsym Mod4+F8  exec i3-resurrect save -w 18:B8; mode "default"
    bindsym Mod4+F9  exec i3-resurrect save -w 19:B9; mode "default"
    bindsym Mod4+F10 exec i3-resurrect save -w 20:B10; mode "default"
    bindsym Ctrl+F1  exec i3-resurrect save -w 21:C1; mode "default"
    bindsym Ctrl+F2  exec i3-resurrect save -w 22:C2; mode "default"
    bindsym Ctrl+F3  exec i3-resurrect save -w 23:C3; mode "default"
    bindsym Ctrl+F4  exec i3-resurrect save -w 24:C4; mode "default"
    bindsym Ctrl+F5  exec i3-resurrect save -w 25:C5; mode "default"
    bindsym Ctrl+F6  exec i3-resurrect save -w 26:C6; mode "default"
    bindsym Ctrl+F7  exec i3-resurrect save -w 27:C7; mode "default"
    bindsym Ctrl+F8  exec i3-resurrect save -w 28:C8; mode "default"
    bindsym Ctrl+F9  exec i3-resurrect save -w 29:C9; mode "default"
    bindsym Ctrl+F10 exec i3-resurrect save -w 30:C10; mode "default"
    bindsym Mod1+F1  exec i3-resurrect save -w 31:D1; mode "default"
    bindsym Mod1+F2  exec i3-resurrect save -w 32:D2; mode "default"
    bindsym Mod1+F3  exec i3-resurrect save -w 33:D3; mode "default"
    bindsym Mod1+F4  exec i3-resurrect save -w 34:D4; mode "default"
    bindsym Mod1+F5  exec i3-resurrect save -w 35:D5; mode "default"
    bindsym Mod1+F6  exec i3-resurrect save -w 36:D6; mode "default"
    bindsym Mod1+F7  exec i3-resurrect save -w 37:D7; mode "default"
    bindsym Mod1+F8  exec i3-resurrect save -w 38:D8; mode "default"
    bindsym Mod1+F9  exec i3-resurrect save -w 39:D9; mode "default"
    bindsym Mod1+F10 exec i3-resurrect save -w 40:D10; mode "default"
    # Save all workspaces
    bindsym s exec $I3_SCRIPT/i3_workspace_operator.sh save_all; mode "$mode_workspace"
    # exit mode: "Enter" or "Escape"
    bindsym Return mode "$mode_workspace"
    bindsym Escape mode "default"
}

# Restore workspace mode (within workspace mode)
set $mode_restore_workspace Restore workspace: [Win+1~10]:A1-A10 [Win+F1~F10]:B1-B10 [Ctrl+F1~F10]:C1-C10 [Alt+F1~F10]:D1-D10 [r]estore_all_workspaces
mode "$mode_restore_workspace" {
    bindsym Mod4+1   exec i3-resurrect restore -w 1:A1; mode "default"
    bindsym Mod4+2   exec i3-resurrect restore -w 2:A2; mode "default"
    bindsym Mod4+3   exec i3-resurrect restore -w 3:A3; mode "default"
    bindsym Mod4+4   exec i3-resurrect restore -w 4:A4; mode "default"
    bindsym Mod4+5   exec i3-resurrect restore -w 5:A5; mode "default"
    bindsym Mod4+6   exec i3-resurrect restore -w 6:A6; mode "default"
    bindsym Mod4+7   exec i3-resurrect restore -w 7:A7; mode "default"
    bindsym Mod4+8   exec i3-resurrect restore -w 8:A8; mode "default"
    bindsym Mod4+9   exec i3-resurrect restore -w 9:A9; mode "default"
    bindsym Mod4+10  exec i3-resurrect restore -w 10:A10; mode "default"
    bindsym Mod4+F1  exec i3-resurrect restore -w 11:B1; mode "default"
    bindsym Mod4+F2  exec i3-resurrect restore -w 12:B2; mode "default"
    bindsym Mod4+F3  exec i3-resurrect restore -w 13:B3; mode "default"
    bindsym Mod4+F4  exec i3-resurrect restore -w 14:B4; mode "default"
    bindsym Mod4+F5  exec i3-resurrect restore -w 15:B5; mode "default"
    bindsym Mod4+F6  exec i3-resurrect restore -w 16:B6; mode "default"
    bindsym Mod4+F7  exec i3-resurrect restore -w 17:B7; mode "default"
    bindsym Mod4+F8  exec i3-resurrect restore -w 18:B8; mode "default"
    bindsym Mod4+F9  exec i3-resurrect restore -w 19:B9; mode "default"
    bindsym Mod4+F10 exec i3-resurrect restore -w 20:B10; mode "default"
    bindsym Ctrl+F1  exec i3-resurrect restore -w 21:C1; mode "default"
    bindsym Ctrl+F2  exec i3-resurrect restore -w 22:C2; mode "default"
    bindsym Ctrl+F3  exec i3-resurrect restore -w 23:C3; mode "default"
    bindsym Ctrl+F4  exec i3-resurrect restore -w 24:C4; mode "default"
    bindsym Ctrl+F5  exec i3-resurrect restore -w 25:C5; mode "default"
    bindsym Ctrl+F6  exec i3-resurrect restore -w 26:C6; mode "default"
    bindsym Ctrl+F7  exec i3-resurrect restore -w 27:C7; mode "default"
    bindsym Ctrl+F8  exec i3-resurrect restore -w 28:C8; mode "default"
    bindsym Ctrl+F9  exec i3-resurrect restore -w 29:C9; mode "default"
    bindsym Ctrl+F10 exec i3-resurrect restore -w 30:C10; mode "default"
    bindsym Mod1+F1  exec i3-resurrect restore -w 31:D1; mode "default"
    bindsym Mod1+F2  exec i3-resurrect restore -w 32:D2; mode "default"
    bindsym Mod1+F3  exec i3-resurrect restore -w 33:D3; mode "default"
    bindsym Mod1+F4  exec i3-resurrect restore -w 34:D4; mode "default"
    bindsym Mod1+F5  exec i3-resurrect restore -w 35:D5; mode "default"
    bindsym Mod1+F6  exec i3-resurrect restore -w 36:D6; mode "default"
    bindsym Mod1+F7  exec i3-resurrect restore -w 37:D7; mode "default"
    bindsym Mod1+F8  exec i3-resurrect restore -w 38:D8; mode "default"
    bindsym Mod1+F9  exec i3-resurrect restore -w 39:D9; mode "default"
    bindsym Mod1+F10 exec i3-resurrect restore -w 40:D10; mode "default"
    # Restore all workspaces
    bindsym r exec $I3_SCRIPT/i3_workspace_operator.sh restore_all; mode "$mode_workspace"
    # exit mode: "Enter" or "Escape"
    bindsym Return mode "$mode_workspace"
    bindsym Escape mode "default"
}

# Resize window (you can also use the mouse for that)
set $mode_resize Resize: [ctrl/NONE/alt+(vim-key)]:S/M/L step (left/down/up/right) [win+shift+(vim-key)]:move (left/down/up/right)
bindsym Ctrl+Mod1+r mode "$mode_resize"
mode "$mode_resize" {
    # Resize in small step
    bindsym Ctrl+h resize shrink width 1 px or 1 ppt
    bindsym Ctrl+j resize grow height 1 px or 1 ppt
    bindsym Ctrl+k resize shrink height 1 px or 1 ppt
    bindsym Ctrl+l resize grow width 1 px or 1 ppt
    # Resize in intermediate step
    bindsym h resize shrink width 5 px or 5 ppt
    bindsym j resize grow height 5 px or 5 ppt
    bindsym k resize shrink height 5 px or 5 ppt
    bindsym l resize grow width 5 px or 5 ppt
    # Resize in large step
    bindsym Mod1+h resize shrink width 10 px or 10 ppt
    bindsym Mod1+j resize grow height 10 px or 10 ppt
    bindsym Mod1+k resize shrink height 10 px or 10 ppt
    bindsym Mod1+l resize grow width 10 px or 10 ppt
    # Redefine move focused window
    bindsym Mod4+Shift+h move left
    bindsym Mod4+Shift+j move down
    bindsym Mod4+Shift+k move up
    bindsym Mod4+Shift+l move right
    # exit mode: "Enter" or "Escape"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Redshift mode
# -- https://confluence.jaytaala.com/display/TKB/Redshift+on+i3wm
set $mode_redshift Redshift: [a]uto [r]eset [1] 3000K [2] 3500K [3] 4000K [4] 4500K [5] 5000K [6] 5500K
bindsym Mod4+Shift+z mode "$mode_redshift"
mode "$mode_redshift" {
    bindsym a exec pkill -9 redshift; exec redshift -P -t 5500:4000
    bindsym r exec pkill -9 redshift; exec redshift -x
    bindsym 1 exec pkill -9 redshift; exec redshift -P -O 3000
    bindsym 2 exec pkill -9 redshift; exec redshift -P -O 3500
    bindsym 3 exec pkill -9 redshift; exec redshift -P -O 4000
    bindsym 4 exec pkill -9 redshift; exec redshift -P -O 4500
    bindsym 5 exec pkill -9 redshift; exec redshift -P -O 5000
    bindsym 6 exec pkill -9 redshift; exec redshift -P -O 5500
    # exit mode: "Enter" or "Escape"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# System manager mode
set $mode_system System: [l]ock [e]xit [s]uspend [h]ibernate [r]eboot [p]oweroff [c/C]affeine on/off
bindsym Mod4+Shift+Escape mode "$mode_system"
mode "$mode_system" {
    bindsym l exec loginctl lock-session && sleep 1 && xset dpms force off; mode "default"
    bindsym r exec systemctl reboot; mode "default"
    bindsym p exec systemctl poweroff; mode "default"
    bindsym e exec i3-msg exit; mode "default"
    bindsym s exec i3-msg suspend; mode "default"
    bindsym h exec i3-msg hibernate; mode "default"
    # Set screensaver to 100 min (caffeine-like function)
    bindsym c exec xset dpms 6000 6000 6000 s 6000 6000; exec notify-send -u low "system xset" "Caffeine On (Disable Default X-Screensaver)"; mode "default"
    # Set screensaver to 10 min (default screensaver)
    bindsym Shift+c exec xset dpms 600 600 600 s 600 600; exec notify-send -u low "system xset" "Caffeine Off (Enable Default X-screensaver)"; mode "default"
    # exit mode: "Enter" or "Escape"
    bindsym Escape mode "default"
    bindsym Return mode "default"
}

# Dunst notifier mode
bindsym Mod4+Shift+v mode "$mode_dunst"
set $mode_dunst Dunst: [c]lose [o]pen_context [h]istory-pop [C]lose_all [p]ause_dunst [r]esume_dunst [R]eload_dunst
mode "$mode_dunst" {
    bindsym c       exec dunstctl close
    bindsym o       exec dunstctl context
    bindsym h       exec dunstctl history-pop
    bindsym Shift+c exec dunstctl close-all
    bindsym p       exec dunstctl set-paused true; mode "default"
    bindsym r       exec dunstctl set-paused false
    bindsym Shift+r exec $I3_SCRIPT/i3_dunst_walcolor.sh reload
    # exit mode: "Enter" or "Escape"
    bindsym Escape mode "default"
    bindsym Return mode "default"
}

# Mouse emulation by keyboard mapping
# -- https://www.reddit.com/r/i3wm/comments/ltjoaa/tip_mouse_emulation_using_hjkl/
# Note: xdotool must be installed
set $mode_mouse Mouse emulator: [ctrl/NONE/alt/ctrl_alt+(vim-key)]:S/M/L/XL [((Ctrl)+Shift)+u/i/o]:(release/drag) left/middle/right [,/.]:scrolldown/scrollup [e]nable_autohide [d]isable_autohide
bindsym Ctrl+Mod1+m mode "$mode_mouse"
mode "$mode_mouse" {
    # left up down right --smaller steps
    bindsym Ctrl+h exec "xdotool mousemove_relative -- -2 0"
    bindsym Ctrl+j exec "xdotool mousemove_relative 0 2"
    bindsym Ctrl+k exec "xdotool mousemove_relative -- 0 -2"
    bindsym Ctrl+l exec "xdotool mousemove_relative 2 0"
    # left up down right
    bindsym h exec "xdotool mousemove_relative -- -20 0"
    bindsym j exec "xdotool mousemove_relative 0 20"
    bindsym k exec "xdotool mousemove_relative -- 0 -20"
    bindsym l exec "xdotool mousemove_relative 20 0"
    # left up down right -- larger steps
    bindsym Mod1+h exec "xdotool mousemove_relative -- -100 0"
    bindsym Mod1+j exec "xdotool mousemove_relative 0 100"
    bindsym Mod1+k exec "xdotool mousemove_relative -- 0 -100"
    bindsym Mod1+l exec "xdotool mousemove_relative 100 0"
    # left up down right -- extra larger steps
    bindsym Ctrl+Mod1+h exec "xdotool mousemove_relative -- -500 0"
    bindsym Ctrl+Mod1+j exec "xdotool mousemove_relative 0 500"
    bindsym Ctrl+Mod1+k exec "xdotool mousemove_relative -- 0 -500"
    bindsym Ctrl+Mod1+l exec "xdotool mousemove_relative 500 0"
    # click: left mid right
    bindsym u exec "xdotool click 1"
    bindsym i exec "xdotool click 2"
    bindsym o exec "xdotool click 3"
    # click-and-drag: left mid right
    bindsym Shift+u exec "xdotool mousedown 1"
    bindsym Shift+i exec "xdotool mousedown 2"
    bindsym Shift+o exec "xdotool mousedown 3"
    # drag release: left mid right
    bindsym Ctrl+Shift+u exec "xdotool mouseup 1"
    bindsym Ctrl+Shift+i exec "xdotool mouseup 2"
    bindsym Ctrl+Shift+o exec "xdotool mouseup 3"
    # click: scroll wheel up/down
    bindsym comma  exec "xdotool click 4"
    bindsym period exec "xdotool click 5"
    # cursor autohide [hhpc need to be installed]
    bindsym e exec "hhpc -i 5"; mode "default"
    bindsym d exec "killall hhpc"; mode "default"
    # Enable i3 kill-window in mouse mode
    bindsym Mod4+Shift+q kill
    # exit mode: "Enter" or "Escape"
    bindsym Ctrl+Mod1+m mode "default"
    bindsym Escape mode "default"
    bindsym Return mode "default"
}

# Display mode (use xrandr)
# -- https://thevaluable.dev/i3-config-mouseless/
# For my monitor physically setup: laptop [eDP1 13'] + external {[HDMI1 27'], [HDMI1 24']}
set $mode_display Display: [a]utomatic [A]randr [1]eDP1 Only [2]HDMI1 Only [3]eDP1+HDMI1 Joint [4]eDP1+HDMI1 Mirror [H/h]HDMI1 1920x1080/1920x1200 [E/e]eDP1 1920x1080/1440x810 [P/p]Primary HDMI1/eDP1
bindsym Mod4+Shift+x mode "$mode_display"
mode "$mode_display" {
    bindsym a       exec $I3_SCRIPT/i3_display_monitor_adopter.sh auto; mode "default"
    bindsym Shift+a exec arandr; mode "default"
    bindsym 1       exec $I3_SCRIPT/i3_display_monitor_adopter.sh option eDP1_only; mode "default"
    bindsym 2       exec $I3_SCRIPT/i3_display_monitor_adopter.sh option HDMI1_only; mode "default"
    bindsym 3       exec $I3_SCRIPT/i3_display_monitor_adopter.sh option eDP1_HDMI1_joint; mode "default"
    bindsym 4       exec $I3_SCRIPT/i3_display_monitor_adopter.sh option eDP1_HDMI1_mirror; mode "default"
    bindsym h       exec $I3_SCRIPT/i3_display_monitor_adopter.sh option HDMI1_extend; mode "default"
    bindsym Shift+h exec $I3_SCRIPT/i3_display_monitor_adopter.sh option HDMI1_default; mode "default"
    bindsym e       exec $I3_SCRIPT/i3_display_monitor_adopter.sh option eDP1_shrink; mode "default"
    bindsym Shift+e exec $I3_SCRIPT/i3_display_monitor_adopter.sh option eDP1_default; mode "default"
    bindsym p       exec $I3_SCRIPT/i3_display_monitor_adopter.sh option eDP1_primary; mode "default"
    bindsym Shift+p exec $I3_SCRIPT/i3_display_monitor_adopter.sh option HDMI1_primary; mode "default"
    # exit mode: "Enter" or "Escape"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
