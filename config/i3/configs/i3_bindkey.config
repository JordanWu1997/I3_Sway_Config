# vim: syntax=i3
# ======================================================================================
# All About Bindkeys
# ======================================================================================
# This is to save all bindkeys of programs

# Reload this configuration file
bindsym Mod4+r reload
# Restart whole i3 session
bindsym Mod4+Shift+r restart

# Common program shortcut
# 1 - Text Editor: neovim [Installation: dnf install neovim]
bindsym Ctrl+Mod1+1 exec --no-startup-id $terminal -e nvim
bindsym Ctrl+Mod1+Shift+1 exec --no-startup-id kitty --class floating_kitty -e nvim
# 2 - File Manager (TUI): ranger [Installation: dnf install ranger]
bindsym Ctrl+Mod1+2 exec --no-startup-id $terminal -e ranger
bindsym Ctrl+Mod1+Shift+2 exec --no-startup-id kitty --class floating_kitty -e ranger
# 3 - Media: pulsemixer [Installation: pip install pulsemixer]
bindsym Ctrl+Mod1+3 exec --no-startup-id $terminal -e pulsemixer
bindsym Ctrl+Mod1+Shift+3 exec --no-startup-id kitty --class floating_kitty -e pulsemixer
# 4 - System Monitor: htop [Installation: dnf install htop]
bindsym Ctrl+Mod1+4 exec --no-startup-id $terminal -e htop
bindsym Ctrl+Mod1+Shift+4 exec --no-startup-id kitty --class floating_kitty -e htop
# 5 - Networkmanager TUI: nmtui [Bundled with NetworkManager]
bindsym Ctrl+Mod1+5 exec --no-startup-id $terminal -e nmtui
bindsym Ctrl+Mod1+Shift+5 exec --no-startup-id kitty --class floating_kitty -e nmtui
# 6 - Visualizer: cava [Installation: dnf install cava]
bindsym Ctrl+Mod1+6 exec --no-startup-id $terminal -e cava
bindsym Ctrl+Mod1+Shift+6 exec --no-startup-id kitty --class floating_kitty -e cava
# 7 - Music Steamer (TUI): spotify
bindsym Ctrl+Mod1+7 exec --no-startup-id $terminal -e spotify_tui.sh
bindsym Ctrl+Mod1+Shift+7 exec --no-startup-id kitty --class floating_kitty -e spotify_tui.sh
# 8 - PDF Viewer: zathura [Installation: dnf install zathura]
bindsym Ctrl+Mod1+8 exec --no-startup-id zathura
# 9 - Bluetooth Manager: blueman [Installation: dnf install blueman]
bindsym Ctrl+Mod1+9 exec --no-startup-id blueman-manager
# 0 - File Manager (GUI): neutilus [Installation: dnf install nautilus]
bindsym Ctrl+Mod1+0 exec --no-startup-id nautilus
# - (minus) - Web Browser: brave-browser (google-chromium based)
bindsym Ctrl+Mod1+minus exec --no-startup-id brave-browser
# = (equal) - Web Browser: firefox
bindsym Ctrl+Mod1+equal exec --no-startup-id firefox

# Use pactl to adjust volume in PulseAudio.
# -- For advanced modification, check pulsemxier or alsamixer
bindsym XF86AudioMute             exec pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym Ctrl+XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +1%
bindsym Ctrl+XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -1%
bindsym XF86AudioRaiseVolume      exec pactl set-sink-volume @DEFAULT_SINK@ +5%
bindsym XF86AudioLowerVolume      exec pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym Mod1+XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +10%
bindsym Mod1+XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -10%
bindsym XF86AudioMicMute          exec pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Media player control
bindsym XF86AudioPlay  exec playerctl play-pause && $I3_SCRIPT/i3_MPRIS_notification.sh
bindsym XF86AudioPause exec playerctl play-pause && $I3_SCRIPT/i3_MPRIS_notification.sh
bindsym XF86AudioStop  exec playerctl stop
bindsym XF86AudioNext  exec playerctl next && $I3_SCRIPT/i3_MPRIS_notification.sh
bindsym XF86AudioPrev  exec playerctl previous && $I3_SCRIPT/i3_MPRIS_notification.sh

# Keyboard backlight control
# -- https://github.com/alberto-santini/i3-configuration-x1
# -- https://askubuntu.com/questions/715306/xbacklight-no-outputs-have-backlight-property-no-sys-class-backlight-folder
bindsym Ctrl+XF86MonBrightnessDown exec xbacklight -dec 1
bindsym Ctrl+XF86MonBrightnessUp   exec xbacklight -inc 1
bindsym XF86MonBrightnessDown      exec xbacklight -dec 5
bindsym XF86MonBrightnessUp        exec xbacklight -inc 5
bindsym Mod1+XF86MonBrightnessDown exec xbacklight -dec 10
bindsym Mod1+XF86MonBrightnessUp   exec xbacklight -inc 10

# Rofi window switcher [can be configured in $HOME/.config/rofi/config.rasi]
bindsym Mod4+d                exec rofi -show drun -terminal $terminal
bindsym Mod4+Shift+d          exec rofi -show run -terminal $terminal
bindsym Mod1+Tab              exec rofi -show window -terminal $terminal
bindsym Mod1+Shift+Tab        exec rofi -show windowcd -terminal $terminal
bindsym Ctrl+Mod1+d           exec rofi -show filebrowser -terminal $terminal
bindsym Ctrl+Mod1+Shift+slash exec rofi -show keys -terminal $terminal

# Start a terminal
bindsym Mod4+Return   exec $terminal
bindsym Mod4+KP_Enter exec $terminal

# Start a floating terminal
bindsym Mod4+Shift+Return exec kitty --class floating_kitty

# Kill focus window
bindsym Mod4+Shift+q kill

# Exit i3
bindsym Ctrl+Mod1+q exec "i3-nagbar -f 'pango:DroidSansMono Nerd Font 12' -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"

# Focus the parent/child container
bindsym Mod4+a       focus parent
bindsym Mod4+Shift+a focus child

# Flash current window
bindsym Mod4+slash exec --no-startup-id flash_window

# Vim-key: Change focus
bindsym Mod4+h focus left
bindsym Mod4+j focus down
bindsym Mod4+k focus up
bindsym Mod4+l focus right
# Vim-key: Move focused window
bindsym Mod4+Shift+h move left 50px
bindsym Mod4+Shift+j move down 50px
bindsym Mod4+Shift+k move up 50px
bindsym Mod4+Shift+l move right 50px
# Vim-key: Move focused window (px for floating window)
bindsym Mod4+Ctrl+Shift+h move left
bindsym Mod4+Ctrl+Shift+j move down
bindsym Mod4+Ctrl+Shift+k move up
bindsym Mod4+Ctrl+Shift+l move right

# Arrow-key: Change focus
bindsym Mod4+Left  focus left
bindsym Mod4+Down  focus down
bindsym Mod4+Up    focus up
bindsym Mod4+Right focus right
# Arrow-key: Move focused window (also for micro-movement for floating window)
bindsym Mod4+Shift+Left  move left
bindsym Mod4+Shift+Down  move down
bindsym Mod4+Shift+Up    move up
bindsym Mod4+Shift+Right move right

# Full screen mode
# Toggle full screen
bindsym Mod4+f       fullscreen toggle
bindsym Mod4+Shift+f fullscreen toggle global

# Floating mode
# Change focus between tiling / floating windows
bindsym Mod4+space focus mode_toggle
# Toggle tiling / floating
bindsym Mod4+Shift+space floating toggle
# Toggle stickiness of floating window (always on the top)
bindsym Mod4+Shift+s sticky toggle

# Tiling mode
# Change container layout (stacking, tabbed, splitv, splith)
bindsym Mod4+Shift+e layout toggle splitv splith tabbed stacking
# Change container layout (stacking, tabbed, toggle split)
bindsym Mod4+s layout stacking
bindsym Mod4+w layout tabbed
bindsym Mod4+e layout toggle splitv splith
# Change split direction (vertical, horizontal)
bindsym Mod4+q split toggle

# Title bar toggle (locally, globally)
bindsym Mod4+n       border toggle
bindsym Mod4+Shift+n [all] border toggle
bindsym Ctrl+Mod1+n  [all] border normal

# Mark mode [add i3/rofi to use i3-msg/rofi as input]
# Mark current window with the character
bindsym Mod4+m exec $I3_SCRIPT/i3_mark_operator.sh mark rofi none
# Goto the window with the character
bindsym Mod4+g          exec $I3_SCRIPT/i3_mark_operator.sh goto rofi none
bindsym Mod4+Escape     exec $I3_SCRIPT/i3_mark_operator.sh goto rofi none
bindsym Mod4+apostrophe exec $I3_SCRIPT/i3_mark_operator.sh goto rofi none
# Swap the current window to the window with the character (focus stays)
bindsym Mod4+semicolon exec $I3_SCRIPT/i3_mark_operator.sh swap rofi stay
# Swap the current window to the window with the character (focus moves)
bindsym Mod4+Shift+semicolon exec $I3_SCRIPT/i3_mark_operator.sh swap rofi none

# Scratchpad (i3 background workspace)
# Scratchpad: hide/show window (minus is "-" key but plus is actually "=" key.)
bindsym Mod4+minus move scratchpad
bindsym Mod4+plus  scratchpad show
# Scratchpad: Move all floating windows to the scratchpad and vice versa
bindsym Mod4+Shift+minus [floating] move scratchpad; exec notify-send -u low "i3 Scratchpad" "Move all floating windows to Scratchpad"
bindsym Mod4+Shift+plus  [all] scratchpad show; exec notify-send -u low "i3 Scratchpad" "Bring all scratchpad windows to foreground"

# Resize window with hotkey (px/ppt for floating/tiling window)
bindsym Ctrl+Mod1+h resize shrink width 50 px or 5 ppt
bindsym Ctrl+Mod1+j resize grow height 50 px or 5 ppt
bindsym Ctrl+Mod1+k resize shrink height 50 px or 5 ppt
bindsym Ctrl+Mod1+l resize grow width 50 px or 5 ppt

# Dunst shortcuts
bindsym Ctrl+space       exec dunstctl close
bindsym Ctrl+Shift+space exec dunstctl history-pop

# Input method (ibus)
# Change ibus engine
bindsym Ctrl+Mod1+space exec $I3_SCRIPT/i3_languagechanger.sh
# Disable full character mode of IBUS by default
bindsym Shift+space \
    exec notify-send -u low "IBUS Input Method" "Full character keybind is disabled by default.\nUse system tray for full character usage."

# Screenshot tools (gnome-screenshot + flameshot)
bindsym --release Print  exec flameshot gui -p $HOME/Pictures
bindsym Mod4+Print       exec gnome-screenshot -w
bindsym Mod4+Shift+Print exec gnome-screenshot -i

# Middle button (3-finger tap) over a titlebar kills the window
# The middle button and a modifier over any part of the window kills the window
bindsym --release button2           kill
bindsym --whole-window Mod4+button2 kill

# Right button (2-finger tap) toggles window floating
bindsym --release button3                 floating toggle
bindsym --whole-window Mod4+Shift+button3 floating toggle

# Mouse wheel scroll (2-finger swipe) up/down toggles window floating
bindsym --release button4 move scratchpad
bindsym --release button5 floating toggle

# Show all keybindings in i3 (use rofi as viewer)
# -- https://www.reddit.com/r/i3wm/comments/e1x9n6/keybindings_menu_not_dmenurofi/
bindsym Mod4+Shift+slash exec \
    i3 $(cat ~/.config/i3/configs/* | grep '^bindsym' | grep -v '^\s*#' | \
    sed 's/bindsym / /' | rofi -dmenu -p 'i3 Keybinds' | sed 's/^\s*//' | \
    cut -d' ' -f 2- )
